<Project Sdk="MSTest.Sdk/3.10.0">

	<PropertyGroup>
		<TargetFramework>net9.0</TargetFramework>
		<ImplicitUsings>enable</ImplicitUsings>
		<Nullable>enable</Nullable>
		<IsPackable>false</IsPackable>
		<!-- Force referenced projects to only build net9.0 to avoid requiring .NET 10 SDK during tests -->
		<UnoTargetFrameworkOverride>net9.0</UnoTargetFrameworkOverride>
	</PropertyGroup>

	<ItemGroup>
		<PackageReference Include="AwesomeAssertions" />
		<PackageReference Include="Microsoft.Extensions.Logging.Console" />
		<PackageReference Include="Microsoft.Extensions.Logging.Debug" />
		<PackageReference Include="Microsoft.Extensions.TimeProvider.Testing" />
		<PackageReference Include="StreamJsonRpc" Version="2.17.11" />
		<PackageReference Include="Uno.DevTools.Telemetry" Version="1.1.1">
		  <PrivateAssets>all</PrivateAssets>
		  <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
		</PackageReference>
	</ItemGroup>

	<!-- Link the ApplicationLaunchMonitor source directly so tests can compile without referencing the Server project output -->
	<ItemGroup>
		<Compile Include="..\Uno.UI.RemoteControl.Server\AppLaunch\ApplicationLaunchMonitor.cs" Link="AppLaunch\ApplicationLaunchMonitor.cs" />
		<Compile Include="..\Uno.UI.RemoteControl.VS\AppLaunch\VsAppLaunchStateService.cs" Link="AppLaunch\VsAppLaunchStateService.cs" />
	</ItemGroup>

	<ItemGroup>
		<!-- Reference those projects to ensure to have binaries available at runtime, but don't reference them for compilation -->
		<ProjectReference Include="..\Uno.UI.RemoteControl.Host\Uno.UI.RemoteControl.Host.csproj" ReferenceOutputAssembly="false" AdditionalProperties="UnoTargetFrameworkOverride=net9.0" />
		<ProjectReference Include="..\Uno.UI.RemoteControl.Server\Uno.UI.RemoteControl.Server.csproj" ReferenceOutputAssembly="false" AdditionalProperties="UnoTargetFrameworkOverride=net9.0" />
		<ProjectReference Include="..\Uno.UI.RemoteControl.Server.Processors\Uno.UI.RemoteControl.Server.Processors.csproj" ReferenceOutputAssembly="false" AdditionalProperties="UnoTargetFrameworkOverride=net9.0" />
		<ProjectReference Include="..\Uno.UI.RemoteControl.TestProcessor\Uno.UI.RemoteControl.TestProcessor.csproj" ReferenceOutputAssembly="false" AdditionalProperties="UnoTargetFrameworkOverride=net9.0" />
	</ItemGroup>

	<ItemGroup>
		<!-- Include BannerHelper source file directly for testing -->
		<Compile Include="..\Uno.UI.RemoteControl.Host\Helpers\BannerHelper.cs" Link="Helpers\BannerHelper.cs" />
		<!-- Reuse the AssemblyInfoReader implementation from the VS project to avoid duplication -->
		<Compile Include="..\Uno.UI.RemoteControl.VS\Helpers\AssemblyInfoReader.cs" Link="Helpers\AssemblyInfoReader.cs" />
	</ItemGroup>

	<ItemGroup>
		<!-- Normal project references - use Skia implementation of the Remote Control client -->
		<ProjectReference Include="..\Uno.UI.RemoteControl\Uno.UI.RemoteControl.Skia.csproj" AdditionalProperties="UnoTargetFrameworkOverride=net9.0" />
		<ProjectReference Include="..\Uno.UWP\Uno.Skia.csproj" AdditionalProperties="UnoTargetFrameworkOverride=net9.0" />
	</ItemGroup>

</Project>
