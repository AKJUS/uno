parameters:
  vmImage: ''
  vmMacImage: ''
  vmMacImageTest: ''
  vmLinuxImage: ''
  vmLinuxPool: ''
  xCodeRootTest: ''
  xCodeRootBuild: ''
  poolName: ''
  UNO_UWP_BUILD: ''
  XAML_FLAVOR_BUILD: ''

stages:
- stage: runtime_tests_skia_build
  displayName: Build Skia Runtime Tests
  dependsOn:
    - Setup

  jobs:
  - template: .azure-devops-skia-tests-build.yml
    parameters:
      vmImage: '$(vmImage)'
      vmMacImage: '$(vmMacImage)'
      vmMacImageTest: '$(vmMacImageTest)'
      vmLinuxImage: '$(vmLinuxImage)'
      vmLinuxPool: '$(vmLinuxPool)'
      xCodeRootTest: '$(xCodeRootTest)'
      xCodeRootBuild: '$(xCodeRootBuild)'
      poolName: '$(poolName)'
      UNO_UWP_BUILD: '$(UNO_UWP_BUILD)'
      XAML_FLAVOR_BUILD: '$(XAML_FLAVOR_BUILD)'

- stage: runtime_tests_skia_browser
  displayName: Browser Skia Runtime Tests
  dependsOn:
    - runtime_tests_skia_build

  jobs:
  - template: .azure-devops-skia-tests-build-browser.yml
    parameters:
      vmImage: '$(vmImage)'
      vmMacImage: '$(vmMacImage)'
      vmMacImageTest: '$(vmMacImageTest)'
      vmLinuxImage: '$(vmLinuxImage)'
      vmLinuxPool: '$(vmLinuxPool)'
      xCodeRootTest: '$(xCodeRootTest)'
      xCodeRootBuild: '$(xCodeRootBuild)'
      poolName: '$(poolName)'
      UNO_UWP_BUILD: '$(UNO_UWP_BUILD)'
      XAML_FLAVOR_BUILD: '$(XAML_FLAVOR_BUILD)'
  - template: .azure-devops-skia-tests-browser.yml
    parameters:
      vmImage: '$(vmImage)'
      vmMacImage: '$(vmMacImage)'
      vmMacImageTest: '$(vmMacImageTest)'
      vmLinuxImage: '$(vmLinuxImage)'
      vmLinuxPool: '$(vmLinuxPool)'
      xCodeRootTest: '$(xCodeRootTest)'
      xCodeRootBuild: '$(xCodeRootBuild)'
      poolName: '$(poolName)'
      UNO_UWP_BUILD: '$(UNO_UWP_BUILD)'
      XAML_FLAVOR_BUILD: '$(XAML_FLAVOR_BUILD)'

- stage: runtime_tests_skia_android
  displayName: Android Skia Runtime Tests
  dependsOn:
    - runtime_tests_skia_build

  jobs:
  - template: .azure-devops-skia-tests-android.yml
    parameters:
      vmImage: '$(vmImage)'
      vmMacImage: '$(vmMacImage)'
      vmMacImageTest: '$(vmMacImageTest)'
      vmLinuxImage: '$(vmLinuxImage)'
      vmLinuxPool: '$(vmLinuxPool)'
      xCodeRootTest: '$(xCodeRootTest)'
      xCodeRootBuild: '$(xCodeRootBuild)'
      poolName: '$(poolName)'
      UNO_UWP_BUILD: '$(UNO_UWP_BUILD)'
      XAML_FLAVOR_BUILD: '$(XAML_FLAVOR_BUILD)'

- stage: runtime_tests_skia_ios
  displayName: iOS Skia Runtime Tests
  dependsOn:
    - runtime_tests_skia_build

  jobs:
  - template: .azure-devops-skia-tests-build-ios.yml
    parameters:
      vmImage: '$(vmImage)'
      vmMacImage: '$(vmMacImage)'
      vmMacImageTest: '$(vmMacImageTest)'
      vmLinuxImage: '$(vmLinuxImage)'
      vmLinuxPool: '$(vmLinuxPool)'
      xCodeRootTest: '$(xCodeRootTest)'
      xCodeRootBuild: '$(xCodeRootBuild)'
      poolName: '$(poolName)'
      UNO_UWP_BUILD: '$(UNO_UWP_BUILD)'
      XAML_FLAVOR_BUILD: '$(XAML_FLAVOR_BUILD)'
  - template: .azure-devops-skia-tests-ios.yml
    parameters:
      vmImage: '$(vmImage)'
      vmMacImage: '$(vmMacImage)'
      vmMacImageTest: '$(vmMacImageTest)'
      vmLinuxImage: '$(vmLinuxImage)'
      vmLinuxPool: '$(vmLinuxPool)'
      xCodeRootTest: '$(xCodeRootTest)'
      xCodeRootBuild: '$(xCodeRootBuild)'
      poolName: '$(poolName)'
      UNO_UWP_BUILD: '$(UNO_UWP_BUILD)'
      XAML_FLAVOR_BUILD: '$(XAML_FLAVOR_BUILD)'

- stage: runtime_tests_skia_linux
  displayName: Linux Skia Runtime Tests
  dependsOn:
    - runtime_tests_skia_build

  jobs:
  - template: .azure-devops-skia-tests-linux.yml
    parameters:
      vmImage: '$(vmImage)'
      vmMacImage: '$(vmMacImage)'
      vmMacImageTest: '$(vmMacImageTest)'
      vmLinuxImage: '$(vmLinuxImage)'
      vmLinuxPool: '$(vmLinuxPool)'
      xCodeRootTest: '$(xCodeRootTest)'
      xCodeRootBuild: '$(xCodeRootBuild)'
      poolName: '$(poolName)'
      UNO_UWP_BUILD: '$(UNO_UWP_BUILD)'
      XAML_FLAVOR_BUILD: '$(XAML_FLAVOR_BUILD)'

- stage: runtime_tests_skia_windows
  displayName: Windows Skia Runtime Tests
  dependsOn:
    - runtime_tests_skia_build

  jobs:
  - template: .azure-devops-skia-tests-windows.yml
    parameters:
      vmImage: '$(vmImage)'
      vmMacImage: '$(vmMacImage)'
      vmMacImageTest: '$(vmMacImageTest)'
      vmLinuxImage: '$(vmLinuxImage)'
      vmLinuxPool: '$(vmLinuxPool)'
      xCodeRootTest: '$(xCodeRootTest)'
      xCodeRootBuild: '$(xCodeRootBuild)'
      poolName: '$(poolName)'
      UNO_UWP_BUILD: '$(UNO_UWP_BUILD)'
      XAML_FLAVOR_BUILD: '$(XAML_FLAVOR_BUILD)'


